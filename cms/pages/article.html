<div class="article">
  <!-- 头部按钮 -->
  <div class="article-option">
    
    <div class="btn-left">
      <button class="btn btn-primary">新增</button>
      <button class="btn btn-danger">批量删除</button>
    </div>
    <div class="btn-right"></div>
  </div>
  <!-- 表格 -->
  <div>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>编号</th>
          <th>文章标题</th>
          <th>所属栏目</th>
          <th>作业</th>
          <th>发布时间</th>
          <th>阅读次数</th>
          <th>状态</th>
          <th style="text-align:center;">操作</th>
        </tr>
      </thead>
      <tbody>
        
      </tbody>
    </table>
  </div>

  
  <div id="articlePage" class="demo"></div>
</div>

<script>
  findAllArticle(0);
  function findAllArticle(page){
    myAjax('/manager/article/findArticle','get',{page:page,pageSize:10},function(res){
      $('tbody').empty();
      res.data.list.forEach(function(item){
        var newTr = $(`
          <tr>
            <td><input type="checkbox" value="`+item.id+`"></td>
            <td>`+item.title+`</td>
            <td>`+(item.category ? item.category.name : '--')+`</td>
            <td>`+(item.author ? item.author.username : '--')+`</td>
            <td>`+item.publishtime+`</td>   
            <td>`+item.readtimes+`</td>
            <td>`+item.status+`</td>
            <td style="text-align:center;">
              <span>
                <i class="iconfont icon-shanchu category-delete" title="删除"></i>
                <i class="iconfont icon-xiugai category-edit" title="修改"></i>
              </span>
            </td>
          </tr>
        `)
        $('tbody').append(newTr);
      })

      $("#articlePage").sPage({
      page:res.data.page+1,
        pageSize:res.data.pageSize,
        total:res.data.total,
        prevPage:"←",
        nextPage:"→",
        backFun:function(page){
          // page为当前点击的页码
          findAllArticle(page-1);
        }
      });
    })  
  }
  
</script>